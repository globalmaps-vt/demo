<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title></title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.26.0/mapbox-gl.css' rel='stylesheet' />
<link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
table { border-collapse: collapse; }
td { border: 1px solid #b9b9b9; }
</style>
</head>
<body>
<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiaGZ1IiwiYSI6ImlRSGJVUTAifQ.rTx380smyvPc1gUfZv1cmw';
map = new mapboxgl.Map({
  container: 'map', style: 'mapbox://styles/mapbox/satellite-v9',
  center: [-13.359375,  13.238984], zoom: 8.0, hash: true, maxZoom: 12
});
colors = [
  'FC49A3', 'CC66FF', '66CCFF', '66FFCC',
  '00FF00', 'FFCC66', 'FF6666', 'FF0000',
  'FF8000', 'FFFF66', '00FFFF'
];
function randomColor() {
  return '#' + colors[parseInt(Math.random() * colors.length)];
}
map.on('load', function () {
  map.addSource('globalmaps-vt', {
    tiles: ['https://globalmaps-vt.github.io/gmsn20vt/{z}/{x}/{y}.mvt'],
    type: 'vector', maxzoom: 8
  });
  map.addLayer({
    'id': 'XX501-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgXX501',
    'paint': {
      'fill-color': '#ff0',
      'fill-opacity': 0.1
    }
  });
  map.addLayer({
    'id': 'BA030-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBA030',
    'paint': {
      'fill-color': randomColor(),
      'fill-opacity': 0.8
    }
  });
  map.addLayer({
    'id': 'BA020-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBA020',
    'paint': {
      'fill-color': '#e3f3f7',
      'fill-opacity': 0.5
    }
  });
  map.addLayer({
    'id': 'FA001-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgFA001',
    'paint': {
      'fill-color': '#fffcdb',
      'fill-opacity': 0.1
    }
  });
  map.addLayer({
    'id': 'BA040-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBA040',
    'paint': {
      'fill-color': '#e3f3f7',
      'fill-opacity': 0.8
    }
  });
  map.addLayer({
    'id': 'BH000-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBH000',
    'paint': {
      'fill-color': '#5494a8',
      'fill-opacity': 0.8
    }
  });
  map.addLayer({
    'id': 'BH080-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBH080',
    'paint': {
      'fill-color': '#e3f3f7',
      'fill-opacity': 0.8
    }
  });
  map.addLayer({
    'id': 'BH130-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBH130',
    'paint': {
      'fill-color': '#e3f3f7',
      'fill-opacity': 0.8
    }
  });
  map.addLayer({
    'id': 'BJ030-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBJ030',
    'paint': {
      'fill-color': '#ccf',
      'fill-opacity': 0.5
    }
  });
  map.addLayer({
    'id': 'BJ100-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgBJ100',
    'paint': {
      'fill-color': '#ccf',
      'fill-opacity': 0.5
    }
  });
  map.addLayer({
    'id': 'AL020-pg', 'type': 'fill',
    'source': 'globalmaps-vt', 'source-layer': 'pgAL020',
    'paint': {
      'fill-color': '#f00',
      'fill-opacity': 0.3
    }
  });

  map.addLayer({
    'id': 'AN010',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAN010',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#000',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'AN500',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAN500',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#e7b2a8',
      'line-width': 2
    }
  });
  map.addLayer({
    'id': 'AP030',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAP030',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#ccc',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'AP050',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAP050',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#ccc',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'AP500',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAP500',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#ccc',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'AQ040',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAQ040',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#f00',
      'line-width': 2
    }
  });
  map.addLayer({
    'id': 'AQ070',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAQ070',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#5494a8',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'AQ130',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsAQ130',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#f00',
      'line-width': 2
    }
  });
  map.addLayer({
    'id': 'BA010',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsBA010',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#5494a8',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'BH140',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsBH140',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#54a498',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'BH210',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsBH210',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#5494a8',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'BH502',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsBH502',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#5494a8',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'BI020',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsBI020',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#aaf',
      'line-width': 2
    }
  });
  map.addLayer({
    'id': 'BI030',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsBI030',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#aaf',
      'line-width': 2
    }
  });
  map.addLayer({
    'id': 'FA000',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsFA000',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#f00',
      'line-width': 1
    }
  });
  map.addLayer({
    'id': 'XX500',
    'type': 'line', 'source': 'globalmaps-vt', 'source-layer': 'lsXX500',
    'layout': {'line-join': 'round', 'line-cap': 'round'},
    'paint': {
      'line-color': '#00f',
      'line-width': 1
    }
  });

  map.addLayer({
    'id': 'AL020-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAL020',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '{nam}',
    }
  });
  map.addLayer({
    'id': 'AL105-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAL105',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '{nam}',
    }
  });
  map.addLayer({
    'id': 'AN060-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAN060',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'AP020-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAP020',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'AQ062-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAQ062',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'AQ063-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAQ063',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'AQ080-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAQ080',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '{nam}',
    }
  });
  map.addLayer({
    'id': 'AQ090-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAQ090',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'AQ125-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAQ125',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '{nam}',
    }
  });
  map.addLayer({
    'id': 'AQ135-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptAQ135',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'BH170-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptBH170',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'BH503-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptBH503',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'BI029-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptBI029',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'BI030-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptBI030',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '*',
    }
  });
  map.addLayer({
    'id': 'GB005-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptGB005',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '{nam}',
    }
  });
  map.addLayer({
    'id': 'ZD040-pt', 'type': 'symbol',
    'source': 'globalmaps-vt', 'source-layer': 'ptZD040',
    'paint': {
      'text-color': randomColor()
    },
    'layout': {
      'text-field': '{namn1}',
    }
  });

});
describe = function(f_code) {
  return '('  + {
    'AN010': 'railway',
    'AN500': 'raliway network link',
    'AP030': 'road',
    'AP050': 'trail',
    'AP500': 'road network link',
    'AQ040': 'bridge',
    'AQ070': 'ferry route',
    'AQ130': 'tunnel',
    'BA010': 'coastline',
    'BH140': 'river',
    'BH210': 'inland shoreline',
    'BH502': 'watercourse',
    'BI020': 'dam',
    'BI030': 'lock',
    'FA000': 'administrative boundary',
    'XX500': 'sea limit',

    'AL020': 'builtup area',
    'AL105': 'settlement',
    'AN060': 'railroad yard',
    'AP020': 'interchange',
    'AQ062': 'crossing',
    'AQ063': 'road intersection',
    'AQ080': 'ferry site',
    'AQ090': 'entrance / exit',
    'AQ125': 'station',
    'AQ135': 'vehicle stopping area',
    'BH170': 'spring',
    'BH503': 'hydrographic network node',
    'BI029': 'dam',
    'BI030': 'lock',
    'GB005': 'airport',
    'ZD040': 'named location',

    'AL020': 'builtup area',
    'BA020': 'foreshore',
    'BA030': 'island',
    'BA040': 'water',
    'BH000': 'inland water',
    'BH080': 'lake / pond',
    'BH130': 'reservoir',
    'BJ030': 'glacier',
    'BJ100': 'snow field',
    'FA001': 'administrative area',
    'XX501': 'landmask area'

  }[f_code] + ')';
}
map.on('click', function(e) {
  var features = map.queryRenderedFeatures(e.point, {
    //layers: ['FA001-pg']
  });
  if (!features.length) return;
  var s = features.length + ' features.<br/>';
  for(var i in features) {
    s += '<table><tr>'
    for(var j in features[i].properties) {
      var v = features[i].properties[j];
      s += "<td>" + j + ": " +
        v + (j == 'f_code' ? describe(v) : '') + "</td>";
    }
    s += '</tr></table>';
  }
  var popup = new mapboxgl.Popup()
    .setLngLat(map.unproject(e.point))
    .setHTML(s)
    .addTo(map);
});
</script>
</body>
</html>
